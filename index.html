<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

  <style>
    /* ==== 画面固定 UI ==== */
    #ui {
      position: fixed;           /* A‑Frame の上に載せる */
      bottom: 1rem;
      left: 0; right: 0;
      display: flex;
      justify-content: center;
      gap: .5rem;
      pointer-events: auto;      /* AR.js 側とイベント競合しない */
    }
    .model-btn{
      padding:.6rem 1rem;
      border:1px solid #fff;
      border-radius:6px;
      background:rgba(0,0,0,.5);
      color:#fff;font-size:.9rem;
      backdrop-filter: blur(4px);
    }
  </style>
</head>

<body style="margin:0;overflow:hidden;">

  <!-- ======================================================== -->
  <!-- A‑Frame / AR.js シーン                                   -->
  <!-- ======================================================== -->
  <a-scene embedded arjs>

    <!-- マーカー -->
    <a-marker type="pattern" url="./logo1.patt">

      <a-entity id="orbitRoot"
                animation="property:rotation; to:0 -360 0; loop:true; dur:5000; easing:linear">

        <!-- 切替対象のモデル本体 -->
        <a-entity id="model"
                  gltf-model="#m1"
                  position="1.3 0 0"
                  scale="1 1 1"
                  animation-mixer>
        </a-entity>

      </a-entity>
    </a-marker>

    <a-entity camera></a-entity>
    <a-assets>
      <a-asset-item id="m1" src="./ito_walking.glb"></a-asset-item>
      <a-asset-item id="m2" src="./robot.glb"></a-asset-item>
      <a-asset-item id="m3" src="./dinosaur.glb"></a-asset-item>
    </a-assets>
  </a-scene>

  <!-- ======================================================== -->
  <!-- 画面固定 UI                                              -->
  <!-- ======================================================== -->
  <div id="ui">
    <button class="model-btn" data-src="#m1" data-scale="1 1 1">3Dモデル1</button>
    <button class="model-btn" data-src="#m2" data-scale="0.8 0.8 0.8">3Dモデル2</button>
    <button class="model-btn" data-src="#m3" data-scale="1.2 1.2 1.2">3Dモデル3</button>
  </div>

  <script>
    /* ===== 切替 ===== */
    const modelEntity = document.querySelector('#model');

    document.querySelectorAll('.model-btn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const src   = btn.dataset.src;      // #m1 など
        const scale = btn.dataset.scale;    // "1 1 1" など
        modelEntity.setAttribute('gltf-model', src);
        modelEntity.setAttribute('scale',      scale);

        /* anim再開 */
        modelEntity.addEventListener('model-loaded',()=>{
          modelEntity.setAttribute('animation-mixer', {
            clip:'*',
            loop:'repeat',
            timeScale:1
          });
        },{once:true});
      });
    });
  </script>

</body>
</html>
