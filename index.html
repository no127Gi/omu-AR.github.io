<!DOCTYPE html>
<html>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>

    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>


    <script>
      AFRAME.registerComponent('shadow-catcher', {
        init() {
          this.el.addEventListener('loaded', () => {
            const obj = this.el.getObject3D('mesh');
            if (!obj) return;
            obj.traverse(n => {
              if (n.isMesh) {
                n.material = new THREE.ShadowMaterial({ opacity: 0.35 });
                n.receiveShadow = true;
              }
            });
          });
        }
      });
    </script>
    
    <body style="margin : 0px; overflow: hidden;">
        <a-scene embedded 
            arjs="sourceType:webcam; debugUIEnabled:false"
            renderer="alpha:true; antialias:true; shadowMapEnabled:true; shadowMapType:pcfsoft"
            shadow="type:pcfsoft">
            
            <a-marker type = "pattern" url = "./logo1.patt">

                <a-entity
                  light="type:directional; intensity:0.9; castShadow:true"
                  position="1 2 1"
                  rotation="-45 45 0">
                </a-entity>
        
                <a-plane
                  position="0 0 0"
                  rotation="-90 0 0"
                  width="2"
                  height="2"
                  shadow-catcher>
                </a-plane>

                
                <a-entity id="orbitRoot"
                    position="0 0 0"
                    animation="property: rotation;
                                to: 0 -360 0;
                                loop: true;
                                dur: 5000; 
                                easing: linear">

                    <a-entity
                    position="1 0 0"
                    scale="0.7 0.7 0.7"
                    gltf-model="./ito_walking.glb"
                    animation-mixer="clip: *; loop: repeat; timeScale:1">
                    </a-entity>
                </a-entity>
                
            </a-marker>
            <a-entity camera></a-entity>
        </a-scene>
    </body>
</html>
